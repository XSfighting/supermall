"use strict";(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[772],{9707:function(t,e,a){a.d(e,{Z:function(){return l}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,r){return a("div",{staticClass:"tab-control-item",class:{active:r===t.currentIndex},on:{click:function(e){return t.itemClick(r)}}},[a("span",[t._v(t._s(e))])])})),0)},n=[],i={name:"TabControl",props:{titles:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("tabClick",t)}}},c=i,o=a(1001),s=(0,o.Z)(c,r,n,!1,null,"08bc7f4a",null),l=s.exports},4611:function(t,e,a){a.r(e),a.d(e,{default:function(){return R}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"category"}},[a("nav-bar",{staticClass:"cate-nav"},[a("div",{attrs:{slot:"center"},slot:"center"},[t._v("分类")])]),a("div",{staticClass:"content"},[a("tab-menu",{staticClass:"tab-menu",attrs:{categories:t.categories},on:{selectItem:t.selectItem}}),a("scroll",{staticClass:"scroll-content"},[a("tab-content",{attrs:{categoriesProduct:t.categoriesProduct}}),a("tab-control",{attrs:{titles:["综合","新品","销量"]},on:{tabClick:t.tabClick}}),a("tab-content-detail",{attrs:{categoryDetail:t.showCategoryDetail}})],1)],1)],1)},n=[],i=a(3019),c=a(334),o=a(57),s=a(9707),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("scroll",{attrs:{id:"tab-menu"}},[a("div",{staticClass:"menu-list"},t._l(t.categories,(function(e,r){return a("div",{key:r,staticClass:"menu-list-item",class:{active:r===t.currentIndex},on:{click:function(e){return t.itemClick(r)}}},[t._v(" "+t._s(e.title)+" ")])})),0)])},u=[],g={name:"TabMenu",components:{Scroll:o.Z},props:{categories:Array},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("selectItem",t)}}},d=g,m=a(1001),p=(0,m.Z)(d,l,u,!1,null,"e9a9e46c",null),y=p.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-content"},[t.categoriesProduct?a("grid-view",{attrs:{cols:3,lineSpace:15,"v-margin":20}},t._l(t.categoriesProduct,(function(e,r){return a("div",{key:r,staticClass:"content-item"},[a("img",{attrs:{src:e.image,alt:""}}),a("div",[t._v(t._s(e.title))])])})),0):t._e()],1)},h=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"gridView",staticClass:"grid-view"},[t._t("default")],2)},b=[],_=(a(9653),a(2222),{name:"GridView",props:{cols:{type:Number,default:2},hMargin:{type:Number,default:8},vMargin:{type:Number,default:8},itemSpace:{type:Number,default:8},lineSpace:{type:Number,default:8}},mounted:function(){setTimeout(this._autoLayout,20)},updated:function(){this._autoLayout()},methods:{_autoLayout:function(){var t=this.$refs.gridView,e=t.children;t.style.padding="".concat(this.vMargin,"px ").concat(this.hMargin,"px");for(var a=(t.clientWidth-2*this.hMargin-this.cols*this.itemSpace)/this.cols,r=0;r<e.length;r++){var n=e[r];n.style.width=a+"px",(r+1)%this.cols!==0&&(n.style.marginRight=this.itemSpace+"px"),r>=this.cols&&(n.style.marginTop=this.lineSpace+"px")}}}}),C=_,D=(0,m.Z)(C,v,b,!1,null,"947a6bca",null),x=D.exports,k={name:"TabContent",props:{categoriesProduct:{type:Array,default:function(){return[]}}},data:function(){return{}},components:{GridView:x}},I=k,w=(0,m.Z)(I,f,h,!1,null,"40102e86",null),T=w.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.categoryDetail?a("grid-view",{attrs:{lineSpace:15,"v-margin":20}},t._l(t.categoryDetail,(function(t,e){return a("goods-list-item",{key:e,attrs:{goodsItem:t}})})),1):t._e()},S=[],$=a(1947),M={name:"TabContentDetail",components:{GridView:x,GoodsListItem:$.Z},props:{categoryDetail:{type:Array,default:function(){return[]}}},created:function(){}},P=M,E=(0,m.Z)(P,Z,S,!1,null,"71d7d322",null),N=E.exports,W=a(2924);function V(){return(0,W.W)({url:"/category"})}function A(t){return(0,W.W)({url:"/subcategory",params:{maitKey:t}})}function G(t,e){return(0,W.W)({url:"/subcategory/detail",params:{miniWallkey:t,type:e}})}var L={name:"Category",components:{NavBar:c.Z,Scroll:o.Z,TabControl:s.Z,TabMenu:y,TabContent:T,TabContentDetail:N},data:function(){return{categories:[],currentIndex:0,categoryData:[],categoriesProduct:[],currentType:"pop"}},created:function(){this._getCategory()},mounted:function(){},methods:{_getCategory:function(){var t=this;V().then((function(e){t.categories=e.data.category.list;for(var a=0;a<t.categories.length;a++)t.categoryData[a]={subcategories:{},categoryDetail:{pop:[],new:[],sell:[]}};t._getSubcategory(0)}))},_getSubcategory:function(t){var e=this;this.currentIndex=t;var a=this.categories[t].maitKey;A(a).then((function(a){e.categoriesProduct=a.data.list,e.categoryData[t].subcategories=a.data,e.categoryData=(0,i.Z)({},e.categoryData),e._getCategoryDetail("pop"),e._getCategoryDetail("new"),e._getCategoryDetail("sell"),console.log(e.categoryData[t])}))},_getCategoryDetail:function(t){var e=this,a=this.categories[this.currentIndex].miniWallkey;G(a,t).then((function(a){e.categoryData[e.currentIndex].categoryDetail[t]=a,e.categoryData=(0,i.Z)({},e.categoryData)}))},selectItem:function(t){this._getSubcategory(t)},tabClick:function(t){switch(t){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}}},computed:{showCategoryDetail:function(){return-1===this.currentIndex?[]:(console.log(this.currentType),this.categoryData[this.currentIndex].categoryDetail[this.currentType])}}},K=L,B=(0,m.Z)(K,r,n,!1,null,"7cccc922",null),R=B.exports}}]);
//# sourceMappingURL=772-legacy.4bd7e197.js.map